viewport:width=device-width,initial-scale=1

目录

[TOC]

##计算机网络
###Ch5运输层

+ (在不可靠的网络上)实现可靠传输的工作原理
	- 停止-等待协议
	- ARQ
+ tcp报文段的首部格式
+ tcp的三个重要问题
	- 滑动窗口
	- 流量控制
	- 拥塞控制
+ tcp的连接管理

####运输层协议概述
#####进程间的通信

*有了网络层,为什么还要运输层,?*
通信真正的端点不是主机,而是主机中的进程

运输层一个很重要的功能-复用和分用

+ 复用:发送方不同的应用进程使用同一个运输层协议
+ 分用:接收方的运输层把数据正确交付目的应用进程
(ip层也有复用和分用..)


<!-- 网络层IP数据报只检验首部,而不检验数据部分 -->

**<u>运输层采用面向连接的tcp协议时,逻辑通信相当于一条全双工的可靠信道
采用无连接的upd协议时,逻辑信道仍然是一条不可靠信道</u>**
#####运输层的两个主要协议
+ udp:user datagram protocol
+ tcp: tansmission control protocol
#####运输层的端口
计算机中标识进程用pid
网络中标识进程用端口号
(运输层数据报交付到端口,再有端口交付到目的进程)

+ 服务器端使用的端口号
	- 熟知端口号(0-1023)
	- 登记端口号(1024-49152)
+ 客户端使用的端口号(49152-65535)
####用户数据报UDP
+ 特点
	- 无连接
	- 尽最大努力交付
	- 面向报文:原样发送应用层交付的报文,不合并,不拆分
	- 没有拥塞控制
		+ 有可能引起网络严重的拥塞问题
	- 支持一对一,一对多,多对一,多对多的交互通信
	- 首部开销小,$8个B=4字段\times 2B/字段$
+ 首部格式:4个字段,每个字段2个字节
	- 源端口
	- 目的端口
	- 长度
	- 校验和:要增加12B的伪首部然后计算
		+ 二进制反码运算求和,,??
####传输控制协议TCP
+ 主要特点
	- 面向连接
	- 只能一对一
	- 可靠交付
	- 全双工通信
	- 面向字节流(流入到进程/从进程流出的字节序列)
	而不是面向数据块
		+ 虽然应用程序和tcp的交互是一次一个数据块
		但面向的是这些数据块组成的字节流
		- 和udp相比,tcp不关心应用进程一次把多长的报文发送到tcp的缓存中
		而是根据对方给出的窗口值和当前网络拥塞的程度,来决定一个报文段应包含多少个字节
			+ upd是给多少发多少,不拆分
			+ tcp中,应用进程发的多可以划分为短报文再传送;
			应用进程发来的少,可以先攒着
+ tcp的连接
	- $套接字 socket=\{IP:port\}$
	- $tcp连接::=\{socket_1,socket_2\}=\{IP_1:port_1,IP_2:port_2\}$

####可靠传输的工作原理
#####ARQ(automatic repeat request,自动重复请求)协议
+ 停止等待协议:
**每发送一个分组就停止发送,等待对方的确认,收到对方的确认后再发送下一个分组**
+ 回退N帧
+ 选择重传
#####连续ARQ协议